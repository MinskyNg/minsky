<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>音乐播放器</title><link rel="stylesheet" type="text/css" href="/css/libs/normalize.min.css"><style type="text/css">*{box-sizing:border-box}body{font-family:'Microsoft Yahei',Helvetica,Arial,sans-serif;background-color:#F1F2F3}a{text-decoration:none;color:#555;cursor:pointer}.container{width:1020px;margin:100px auto 0;overflow:hidden}.music-list{float:left;width:680px;height:470px;margin-right:20px;border-radius:3px;color:#555;background-color:#FFF}.music-list h2{height:60px;line-height:60px;text-align:center;font-size:24px}.music-list ul{padding:20px}.music-list li{display:block;line-height:36px;border-bottom:1px dotted #CCC}.music-search{position:relative;width:800px;height:35px;margin:0 auto;color:#555}#music-keyword{position:absolute;top:0;left:10px;width:254px;height:35px;padding:0 10px;border:1px solid #555;border-radius:20px;font-size:14px;line-height:35px;background-color:transparent;outline:0}#search-button{position:absolute;top:0;left:186px;display:inline-block;height:35px;padding:0 10px;border:1px solid #555;border-radius:0 20px 20px 0;font-size:14px;line-height:35px;transition:all .3s linear}#search-button:hover{color:#000}#music-result{position:absolute;top:0;left:320px;display:inline-block;height:35px;padding:0 20px;border:1px dashed #555;border-radius:20px;font-size:14px;line-height:35px;opacity:0;transition:all .7s linear}#music-result strong{margin-right:20px;font-weight:400}#music-play{color:#555}.music-main{float:left;width:320px;height:470px;border-radius:3px;color:#000;background-color:#FFF}.music-header{height:60px;text-align:center;line-height:60px;border-bottom:1px solid #555}.music-header h1{font-size:24px;color:#555}.music-cover{position:relative;height:240px}#music-img{position:absolute;left:50%;top:50%;margin-left:-65px;margin-top:-65px;width:130px;height:130px;border-radius:50%}#music-title{height:40px;line-height:40px;text-align:center}.bars{height:25px;padding-top:5px}#music-bar{position:relative;display:inline-block;width:218px;height:4px;margin-left:5px;margin-right:7px;border-radius:4px;background-color:#DEDEDE}#voice-bar{position:relative;display:inline-block;width:80px;height:4px;border-radius:4px;background-color:#DEDEDE}#played-bar,#voiced-bar{position:absolute;float:left;display:inline-block;height:4px;border-radius:4px;background-color:#555;z-index:2;transition:all .5s linear}#played-bar:after,#voiced-bar:after{position:absolute;right:-2px;top:-2px;content:'';width:8px;height:8px;border-radius:50%;background-color:#FFF;cursor:pointer}#load-bar{position:absolute;float:left;display:inline-block;height:4px;border-radius:4px;background-color:#A2A2A2;z-index:1;transition:all 3s}.music-time{width:216px;padding:3px 0 0 6px;font-size:12px;overflow:hidden}.music-time span:nth-child(1){float:left}.music-time span:nth-child(2){float:right}.controls{padding-top:20px;text-align:center}.controls a{display:inline-block;width:50px;height:50px;line-height:50px;text-align:center;margin-right:5px;border-radius:50%;color:#FFF;background-color:#555}#play{font-size:14px;transition:all .3s linear}#play:hover{transform:scale(1.05)}#prev,#next{width:30px;height:30px;border:2px solid #555;line-height:26px;color:#555;background-color:transparent;transition:all .3s linear}#prev:hover,#next:hover{color:#000;border-color:#EDEDED}#loop,#mute{width:30px;height:16px;margin:0 20px;font-size:13px;font-weight:500;line-height:16px;color:#555;background-color:transparent}#loop:hover,#mute:hover{color:#000}@keyframes rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}</style></head><body><div class="container"><div class="music-list"><h2>歌曲列表</h2><div class="music-search"><input id="music-keyword" type="text"> <a id="search-button" href="javascript:;">搜索音乐</a> <span id="music-result"></span></div><ul><li>静止 - 花儿</li><li>爱在西元前 - 周杰伦</li><li>Sunday Morning - The Velvet Underground</li><li>Lost For Words - Pink Floyd</li><li>Thinking About You - Radiohead</li><li>I Don't Want To Change You - Damien Rice</li></ul></div><audio id="audio"><source title="静止 - 花儿" data-img="http://p3.music.126.net/lqsLKKRRHGVhOv7YjJn1ng==/25288767453869.jpg?param=130y130" src="http://link.hhtjim.com/163/357424.mp3"></source><source title="爱在西元前 - 周杰伦" data-img="http://p4.music.126.net/xLtaiBWhuJ0KJe1_DhC_fg==/59373627912203.jpg?param=130y130" src="http://link.hhtjim.com/163/186114.mp3"></source><source title="Sunday Morning - The Velvet Underground" data-img="http://p4.music.126.net/5CuLry1JQsbXoBvBgL9BmQ==/2535473814614187.jpg?param=130y130" src="http://link.hhtjim.com/163/19537516.mp3"></source><source title="Lost For Words - Pink Floyd" data-img="http://p3.music.126.net/bDHCiHY9YoaITtTEaCkb9Q==/2536573326453297.jpg?param=130y130" src="http://link.hhtjim.com/163/4237164.mp3"></source><source title="Thinking About You - Radiohead" data-img="http://p3.music.126.net/B-g0reAeYZwnwNmxcDbn1w==/874111744105004.jpg?param=130y130" src="http://link.hhtjim.com/163/22605225.mp3"></source><source title="I Don't Want To Change You - Damien Rice" data-img="http://p4.music.126.net/2_x_1PnKTOjuZBSg8T-ZHw==/6633353651022635.jpg?param=130y130" src="http://link.hhtjim.com/163/29427498.mp3"></source></audio><div class="music-main"><div class="music-header"><h1>音乐播放器</h1></div><div class="music-cover"><img id="music-img" src="http://p3.music.126.net/lqsLKKRRHGVhOv7YjJn1ng==/25288767453869.jpg?param=130y130" alt=""></div><div id="music-title">流沙 - 陶喆</div><div class="bars"><span id="music-bar"><span id="load-bar"></span> <span id="played-bar"></span></span> <span id="voice-bar"><span id="voiced-bar"></span></span><div class="music-time"><span id="current-time">0:00</span> <span id="total-time"></span></div></div><div class="controls"><a id="loop" href="javascript:;">循环</a> <a id="prev" href="javascript:;">&lt;</a> <a id="play" href="javascript:;">Play</a> <a id="next" href="javascript:;">&gt;</a> <a id="mute" href="javascript:;">静音</a></div></div></div><script type="text/javascript">function jsonpcallback(t){var e="歌曲：<strong>"+t.result.songs[0].name+"</strong>歌手：<strong>"+t.result.songs[0].artists[0].name+'</strong><a href="javascript:;" id="music-play">立即播放</a>';result.innerHTML=e,result.setAttribute("data-audio",t.result.songs[0].audio),result.setAttribute("data-img",t.result.songs[0].album.picUrl),result.setAttribute("data-music",t.result.songs[0].name),result.setAttribute("data-singer",t.result.songs[0].artists[0].name),result.style.opacity="1"}window.onload=function(){function t(){this.audio=document.getElementById("audio"),this.sourceList=audio.getElementsByTagName("source"),this.play=document.getElementById("play"),this.prev=document.getElementById("prev"),this.next=document.getElementById("next"),this.mute=document.getElementById("mute"),this.voiceBar=document.getElementById("voice-bar"),this.musicBar=document.getElementById("music-bar"),this.playedBar=document.getElementById("played-bar"),this.voicedBar=document.getElementById("voiced-bar"),this.musicTitle=document.getElementById("music-title"),this.loadBar=document.getElementById("load-bar"),this.currentTime=document.getElementById("current-time"),this.totalTime=document.getElementById("total-time"),this.musicImg=document.getElementById("music-img"),this.loop=document.getElementById("loop"),this.currentSrcIndex=0,this.keyword=document.getElementById("music-keyword"),this.searchButton=document.getElementById("search-button"),this.result=document.getElementById("music-result"),this.toPlay=document.getElementById("music-play"),this.init()}t.prototype={init:function(){this.audio.loop=!1,this.audio.autoplay=!1,this.audio.volume=.5,this.voicedBar.style.width=this.audio.volume/1*this.voiceBar.clientWidth+"px",this.audio.autobuffer=!1;var t=parseInt(this.audio.duration/60),e=parseInt(this.audio.duration%60);10>e&&(e="0"+e),this.totalTime.innerHTML=t+":"+e,this.play.onclick=this.handlePlay(this),this.voiceBar.onclick=this.handleVoice.bind(this),this.musicBar.onclick=this.handleProgress.bind(this),this.mute.onclick=this.handleMute.bind(this),this.loop.onclick=this.handleLoop(this),this.next.onclick=this.changeMusic(this,"next"),this.prev.onclick=this.changeMusic(this,"prev"),setInterval(this.updatePlayedBar.bind(this),1e3),setInterval(this.updateCache.bind(this),1e3),this.searchButton.addEventListener("click",this.handleSearch.bind(this)),this.result.addEventListener("click",this.handleResult.bind(this))},handlePlay:function(t){return function(){t.audio.paused?(t.audio.play(),this.innerHTML="Pause",t.musicImg.style.animation="rotate 5s linear infinite"):(t.audio.pause(),this.innerHTML="Play",t.musicImg.removeAttribute("style")),t.musicTime()}},handleVoice:function(t){this.audio.volume=t.offsetX/this.voiceBar.clientWidth,this.voicedBar.style.width=this.audio.volume/1*this.voiceBar.clientWidth+"px"},handleProgress:function(t){var e=this.musicBar.clientWidth;this.audio.currentTime=t.offsetX/e*this.audio.duration,this.playedBar.style.width=this.audio.currentTime/this.audio.duration*e+"px"},handleMute:function(){this.audio.muted?(this.audio.muted=!1,this.voicedBar.style.width=this.audio.volume/1*this.voiceBar.clientWidth+"px"):(this.audio.muted=!0,this.voicedBar.style.width="0px")},handleLoop:function(t){return function(){t.audio.loop?(t.audio.loop=!1,this.innerHTML="循环"):(t.audio.loop=!0,this.innerHTML="单曲")}},changeMusic:function(t,e){return function(){"next"===e?++t.currentSrcIndex>t.sourceList.length-1&&(t.currentSrcIndex=0):--t.currentSrcIndex<0&&(t.currentSrcIndex=t.sourceList.length-1),t.currentSrc=t.sourceList[t.currentSrcIndex].getAttribute("src"),t.currentImg=t.sourceList[t.currentSrcIndex].getAttribute("data-img"),t.musicImg.setAttribute("src",t.currentImg),t.audio.setAttribute("src",t.currentSrc),t.audio.play(),t.play.innerHTML="Pause",t.musicImg.style.animation="rotate 5s linear infinite",t.musicTime()}},musicTime:function(){this.musicTitle.innerHTML=this.sourceList[this.currentSrcIndex].title,this.audio.addEventListener("canplay",function(){var t=this.audio.duration,e=parseInt(t/60),i=parseInt(t%60);this.totalTime.innerHTML=10>i?e+":0"+i:e+":"+i}.bind(this))},updatePlayedBar:function(){this.playedBar.style.width=this.audio.currentTime/this.audio.duration*this.musicBar.clientWidth+"px",this.currentTime.innerHTML=this.audio.currentTime%60<10?parseInt(this.audio.currentTime/60)+":0"+parseInt(this.audio.currentTime%60):parseInt(this.audio.currentTime/60)+":"+parseInt(this.audio.currentTime%60),this.audio.currentTime!==this.audio.duration||this.audio.loop||this.next.onclick()},updateCache:function(){var t,e;4===this.audio.readyState&&(t=this.audio.buffered.end(0)),4===this.audio.readyState&&(e=Math.round(t/this.audio.duration*100)+"%"),this.loadBar.style.width=Math.round(t/this.audio.duration*100)*this.musicBar.clientWidth*.01+"px"},handleSearch:function(){var t=this.keyword.value;if(!t)return void alert("关键词不能为空");var e="http://s.music.163.com/search/get/",i={type:1,limit:1,s:t,callback:"jsonpcallback"},s=[];for(var n in i)s.push(n+"="+encodeURIComponent(i[n]));var a=e+"?"+s.join("&");this.createJsonp(a)},createJsonp:function(t){var e=document.createElement("script");e.src=t,e.async=!0,e.defer=!0,document.body.appendChild(e)},handleResult:function(t){var e=t.target||t.srcElement;if("A"===e.tagName||"a"===e.tagName){var i=this.result.getAttribute("data-audio"),s=this.result.getAttribute("data-img"),n=this.result.getAttribute("data-music"),a=this.result.getAttribute("data-singer");this.musicImg.setAttribute("src",s),this.musicTitle.innerHTML=n+" - "+a,this.audio.setAttribute("src",i),this.audio.play(),this.play.innerHTML="Pause",this.musicImg.style.animation="rotate 5s linear infinite"}}},window.Player=t;new t};var result=document.getElementById("music-result");</script></body></html>
