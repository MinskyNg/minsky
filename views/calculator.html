<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>计算器</title><link rel="stylesheet" type="text/css" href="/css/libs/normalize.min.css"><style type="text/css">body{font-family:'Microsoft Yahei',Helvetica,Arial,sans-serif;background-color:#FFF}#calculator{width:240px;height:auto;padding-bottom:10px;margin:100px auto 0;border:1px solid #FFF;text-align:center;font-size:12px;color:#555;background-color:#EEE;overflow:hidden}#screen{width:200px;height:24px;padding:4px;margin:10px auto;border:1px solid #E6E6E6;border-bottom:1px solid #F2F2F2;border-right:1px solid #F2F2F2;line-height:24px;text-align:right;font-size:16px;color:#999;direction:ltr}#calculator ul{height:auto;padding:0;margin:5px 14px;border:1px solid #FFF;overflow:hidden}#calculator li{list-style:none;float:left;width:32px;height:32px;margin:5px;line-height:32px;font-size:14px;background-color:#666;cursor:pointer}#calculator .button-opera{background-color:#FD9729}#calculator li:hover{background-color:#F9F9F9}#calculator li:active{background-color:#FC0}#calculator .button-opera:active{background-color:#D8E8FF}#note{text-align:left;padding:10px 15px 5px;height:auto;color:red;overflow:hidden}</style></head><body><div id="calculator"><form name="calculator" action="" method="get"><input type="text" id="screen" value="0" onfocus="this.blur()"><div id="buttons"><ul><li class="button-num">7</li><li class="button-num">8</li><li class="button-num">9</li><li class="button-opera">←</li><li class="button-opera">C</li><li class="button-num">4</li><li class="button-num">5</li><li class="button-num">6</li><li class="button-opera">×</li><li class="button-opera">÷</li><li class="button-num">1</li><li class="button-num">2</li><li class="button-num">3</li><li class="button-opera">+</li><li class="button-opera">-</li><li class="button-num">0</li><li class="button-opera">00</li><li class="button-opera">.</li><li class="button-opera">%</li><li class="button-opera">=</li></ul></div><div id="note"></div></form></div><script type="text/javascript">!function(t,e){function s(t){this.num=0,this.result=0,this.screenNum="0",this.input=0,this.operate=0,this.quit=0,this.screen=e.getElementById(t.screenId),this.buttons=e.getElementById(t.buttonsId),this.operateMap={"←":this.backspace.bind(this),C:this.clearScreen.bind(this),"×":this.times.bind(this),"÷":this.divide.bind(this),"+":this.plus.bind(this),"-":this.minus.bind(this),"%":this.mod.bind(this),"=":this.equal.bind(this),"00":this.dzero.bind(this),".":this.dot.bind(this)},this.buttons.addEventListener("click",this.handleClick.bind(this))}s.prototype={handleClick:function(t){var i=t||event,e=i.target;switch(e.className.toLowerCase()){case"button-num":this.addNum(e.innerHTML);break;case"button-opera":this.operateMap[e.innerHTML]()}},addNum:function(t){var i=String(this.screen.value);i="0"!==i&&0===this.input?i:"",i+=String(t),this.screen.value=i,this.input=0,this.quit=0},dzero:function(){var t=String(this.screen.value);t="0"!==t&&0===this.input?t+"00":"0",this.screen.value=t,this.input=0},dot:function(){var t=String(this.screen.value);for(t="0"!==t&&0===this.input?t:"0",i=0;i<=t.length;i++)if("."===t.substr(i,1))return!1;t+=".",this.screen.value=t,this.input=0},backspace:function(){var t=String(this.screen.value);t="0"!==t?t:"",t=t.substr(0,t.length-1),t=""!==t?t:"0",this.screen.value=t},clearScreen:function(){this.num=0,this.result=0,this.screenNum="0",this.screen.value="0"},plus:function(){this.calculate(),this.input=1,this.operate=1},minus:function(){this.calculate(),this.input=1,this.operate=2},times:function(){this.calculate(),this.input=1,this.operate=3},divide:function(){this.calculate(),this.input=1,this.operate=4},mod:function(){this.calculate(),this.input=1,this.operate=5},equal:function(){this.calculate(),this.input=1,this.num=0,this.result=0,this.screenNum="0"},calculate:function(){if(this.screenNum=Number(this.screen.value),0!==this.num&&1!==this.quit){switch(this.operate){case 1:this.result=this.num+this.screenNum;break;case 2:this.result=this.num-this.screenNum;break;case 3:this.result=this.num*this.screenNum;break;case 4:0!==this.screenNum?this.result=this.num/this.screenNum:(e.getElementById("note").innerHTML="被除数不能为零！",setTimeout(this.clearNote,4e3));break;case 5:this.result=this.num%this.screenNum}this.quit=1}else this.result=this.screenNum;this.screenNum=String(this.result),this.screen.value=this.screenNum,this.num=this.result},clearNote:function(){e.getElementById("note").innerHTML=""}},t.Calculator=s}(window,document);var options={screenId:"screen",buttonsId:"buttons"},calculator=new Calculator(options);</script></body></html>
