<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>拖拽碰撞</title><link rel="stylesheet" type="text/css" href="/css/libs/normalize.min.css"><style type="text/css">#drag-list{position:relative;width:660px;height:660px;margin:0 auto;padding:0}#drag-list li{float:left;z-index:1;width:200px;height:200px;margin:10px;list-style:none}#drag-list .active{border:1px dashed #000}</style></head><body><ul id="drag-list"><li><img src="/img/drag6.jpg" alt="6"></li><li><img src="/img/drag4.jpg" alt="4"></li><li><img src="/img/drag3.jpg" alt="3"></li><li><img src="/img/drag9.jpg" alt="9"></li><li><img src="/img/drag8.jpg" alt="8"></li><li><img src="/img/drag1.jpg" alt="1"></li><li><img src="/img/drag7.jpg" alt="7"></li><li><img src="/img/drag5.jpg" alt="5"></li><li><img src="/img/drag2.jpg" alt="2"></li></ul><script type="text/javascript" src="/js/libs/jquery.min.js"></script><script type="text/javascript">!function(e){function t(e){e.onmousedown=function(t){var o=t||event;e.style.zIndex=c++;var f=o.clientX-e.offsetLeft,l=o.clientY-e.offsetTop;return document.onmousemove=function(t){var o=t||event;for(e.style.left=o.clientX-f+"px",e.style.top=o.clientY-l+"px",p=0;r>p;p++)i[p].className="";var s=n(e);s&&(s.className="active")},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null;var t=n(e);if(t){t.className="",t.style.zIndex=c++,e.style.zIndex=c++,s(t,a[e.index]),s(e,a[t.index]);var o=0;o=e.index,e.index=t.index,t.index=o}else s(e,a[e.index])},!1}}function o(e,t){var o=e.offsetLeft,f=e.offsetLeft+u,n=e.offsetTop,s=e.offsetTop+u,l=t.offsetLeft,i=t.offsetLeft+u,r=t.offsetTop,a=t.offsetTop+u;return l>f||o>i||r>s||n>a?!1:!0}function f(e,t){var o=e.offsetLeft-t.offsetLeft,f=e.offsetTop-t.offsetTop;return Math.sqrt(o*o+f*f)}function n(e){var t=9999999,n=-1;for(p=0;p<i.length;p++)if(e!==i[p]&&o(e,i[p])){var s=f(e,i[p]);t>s&&(t=s,n=p)}return-1===n?null:i[n]}function s(t,o){e(t).animate({left:""+o.left,top:""+o.top},500)}var l=document.getElementById("drag-list"),i=l.getElementsByTagName("li"),u=200,r=i.length,a=[],c=2,p=0;for(p=0;r>p;p++)a[p]={left:i[p].offsetLeft,top:i[p].offsetTop};for(p=0;r>p;p++)i[p].style.position="absolute",i[p].style.left=a[p].left+"px",i[p].style.top=a[p].top+"px",i[p].style.margin=0,i[p].index=p;for(p=0;r>p;p++)t(i[p])}(jQuery);</script></body></html>